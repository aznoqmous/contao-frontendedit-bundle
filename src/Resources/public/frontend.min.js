/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/Resources/assets/frontend.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/cookies/src/cookies.js":
/*!*********************************************!*\
  !*** ./node_modules/cookies/src/cookies.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Cookies; });\nclass Cookies {\r\n\r\n    static getAll(){\r\n        let cookies = document.cookie\r\n        if(!cookies) return {}\r\n\r\n        let res = {}\r\n\r\n        cookies.split(';').map(strCookie => {\r\n            let splitted = strCookie.split('=')\r\n            let key = splitted[0].trim().replace(/\\\"/gs, '')\r\n            let value = splitted[1]\r\n            return res[key] = value;\r\n        })\r\n\r\n        return res\r\n    }\r\n\r\n    static get(key){\r\n        let value = Cookies.getAll()[key]\r\n        if(!value) return null\r\n        return JSON.parse(value)\r\n    }\r\n\r\n    static set(key, value, expires=864000000000000, path=null){\r\n        let cookie = `${key}=${JSON.stringify(value)};expires=${new Date(expires).toUTCString()}`\r\n        if(path) cookie += `;path=${path}`\r\n        document.cookie = cookie\r\n    }\r\n\r\n}\r\n\n\n//# sourceURL=webpack:///./node_modules/cookies/src/cookies.js?");

/***/ }),

/***/ "./src/Resources/assets/frontend.js":
/*!******************************************!*\
  !*** ./src/Resources/assets/frontend.js ***!
  \******************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _scss_style_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scss/style.scss */ \"./src/Resources/assets/scss/style.scss\");\n/* harmony import */ var _scss_style_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_scss_style_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _js_frontend_edit__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./js/frontend-edit */ \"./src/Resources/assets/js/frontend-edit.js\");\n/* harmony import */ var cookies__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! cookies */ \"./node_modules/cookies/src/cookies.js\");\n\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (new URLSearchParams(window.location.search).get('frontendedit') == null) new _js_frontend_edit__WEBPACK_IMPORTED_MODULE_1__[\"default\"]();else {\n    if (cookies__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get('frontendedit')) document.body.classList.add('frontendedit');\n  }\n});\n\n//# sourceURL=webpack:///./src/Resources/assets/frontend.js?");

/***/ }),

/***/ "./src/Resources/assets/js/editable-element.js":
/*!*****************************************************!*\
  !*** ./src/Resources/assets/js/editable-element.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EditableElement; });\n/* harmony import */ var _frontend_edit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./frontend-edit */ \"./src/Resources/assets/js/frontend-edit.js\");\n/* harmony import */ var _types_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./types.json */ \"./src/Resources/assets/js/types.json\");\nvar _types_json__WEBPACK_IMPORTED_MODULE_1___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./types.json */ \"./src/Resources/assets/js/types.json\", 1);\n\n\nclass EditableElement {\n  constructor(element) {\n    this.element = element;\n    this.element.editable = this;\n    this.type = this.getType();\n    this.id = this.getId();\n    this.settingsPane = null;\n    this.settingsPaneFirstLoad = true;\n    this.saved = true;\n    this.bindElement();\n  }\n\n  getId() {\n    let match = this.element.className.match(new RegExp(`${this.type.prefix}(\\\\d{1,})`));\n    return match ? match[1] : null;\n  }\n\n  getType() {\n    let thisType = null;\n    _types_json__WEBPACK_IMPORTED_MODULE_1__.some(type => {\n      if (this.element.className.match(type.prefix)) thisType = type;\n      if (thisType) return true;\n    });\n    return thisType;\n  }\n\n  bindElement() {\n    this.element.addEventListener('click', e => {\n      this.setActive();\n    });\n  }\n\n  openSettingsPane() {\n    if (!this.settingsPane) this.createSettingsPane();\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].closeAllSettingsPane();\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].resize();\n    this.settingsPane.style.display = 'block';\n  }\n\n  getSettingsForm() {\n    return this.settingsPane ? this.settingsPane.contentDocument.querySelector('form.tl_edit_form') : null;\n  }\n\n  createSettingsPane() {\n    if (!this.settingsPane) {\n      this.settingsPane = document.createElement('iframe');\n      this.settingsPane.style.display = 'none';\n      _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].contentPane.appendChild(this.settingsPane);\n      this.updateSettingsPane();\n\n      this.settingsPane.onload = () => {\n        if (!this.settingsPaneFirstLoad) {\n          if (this.settingsPaneSubmit) {\n            this.settingsPaneSubmit = false;\n            this.onSettingsPaneSubmit();\n          } else {\n            this.onSettingsPaneReload();\n          }\n        }\n\n        this.bindSettingsPane();\n        this.settingsPaneFirstLoad = false;\n      };\n    }\n  }\n\n  updateSettingsPane(data = new FormData()) {\n    if (!this.settingsPane) this.createSettingsPane();\n    this.settingsPane.src = this.getContentPopupUrl();\n  }\n\n  bindSettingsPane() {\n    let sfToolBar = this.settingsPane.contentDocument.querySelector('.sf-toolbar');\n    if (sfToolBar) sfToolBar.remove();\n    let splitButtons = this.settingsPane.contentDocument.querySelector('.split-button');\n    if (splitButtons) splitButtons.remove();\n    let returnButton = this.settingsPane.contentDocument.querySelector('#tl_buttons');\n    if (returnButton) returnButton.remove();\n    let preview = this.settingsPane.contentDocument.querySelector('#pal_preview_legend');\n    if (preview) preview.remove();\n    this.getSettingsForm().addEventListener('submit', e => {\n      this.settingsPaneSubmit = true;\n    });\n  }\n\n  getContentPopupUrl() {\n    return null;\n  }\n\n  onSettingsPaneReload() {\n    return null;\n  }\n\n  onSettingsPaneSubmit() {\n    this.setSaved();\n    return null;\n  }\n\n  save() {\n    this.settingsPaneSubmit = true;\n    this.getSettingsForm().submit();\n    this.setSaved();\n  }\n\n  setSaved() {\n    this.element.classList.remove('unsaved');\n    this.saved = true;\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateButtons();\n  }\n\n  setUnsaved() {\n    this.element.classList.add('unsaved');\n    this.saved = false;\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].updateButtons();\n  }\n\n  setActive() {\n    this.element.classList.add('active');\n    this.openSettingsPane();\n    this.active = true;\n  }\n\n  setUnactive() {\n    this.element.classList.remove('active');\n    this.active = false;\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Resources/assets/js/editable-element.js?");

/***/ }),

/***/ "./src/Resources/assets/js/embed-editable-element.js":
/*!***********************************************************!*\
  !*** ./src/Resources/assets/js/embed-editable-element.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EmbedEditableElement; });\n/* harmony import */ var _frontend_edit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./frontend-edit */ \"./src/Resources/assets/js/frontend-edit.js\");\n/* harmony import */ var _editable_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editable-element */ \"./src/Resources/assets/js/editable-element.js\");\n/* harmony import */ var _rifle_request__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./rifle-request */ \"./src/Resources/assets/js/rifle-request.js\");\n\n\n\nclass EmbedEditableElement extends _editable_element__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(element) {\n    super(element);\n    this.isParent = this.getIsParent();\n    this.updateController = new AbortController();\n    this.timeout = 100;\n    this.lastT = Date.now();\n    this.active = false;\n    this.requester = new _rifle_request__WEBPACK_IMPORTED_MODULE_2__[\"default\"]();\n    this.buildFloatingSettings();\n  }\n\n  getIsParent() {\n    return this.getChildren().length;\n  }\n\n  getChildren() {\n    return [...this.element.querySelectorAll(\".editable\")];\n  }\n\n  bindElement() {\n    this.element.addEventListener('click', e => {\n      if (!this.isEventTarget(e)) return null;\n      _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editables.map(el => {\n        el.setUnactive();\n      });\n      this.setActive();\n      this.openSettingsPane(this);\n    });\n    this.element.addEventListener('mousemove', e => {\n      if (!this.isEventTarget(e)) return null;\n      _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAllElements().map(el => el.classList.remove('hover'));\n      this.element.classList.add('hover');\n      if (!this.settingsPane) this.createSettingsPane();\n    });\n    this.element.addEventListener('mouseleave', e => {\n      this.element.classList.remove('hover');\n    });\n    let links = [...this.element.querySelectorAll('a[href]')];\n    links.map(l => {\n      l.title = `${l.title ? l.title + \" ( \" + l.href + \" )\" : l.href}`;\n      l.removeAttribute('href');\n      l.addEventListener('click', e => {\n        e.preventDefault();\n      });\n    });\n  }\n\n  fetchContentElementHtml(formData) {\n    return this.requester.fetch(`/api/frontendedit/render/${this.id}`, {\n      method: 'POST',\n      body: formData,\n      signal: this.updateController.signal\n    }).then(res => res.json()).catch(e => {\n      /* no abort exception */\n    });\n  }\n\n  onSettingsPaneSubmit() {\n    this.updateElement(null, true);\n    super.onSettingsPaneSubmit();\n  }\n\n  onSettingsPaneReload() {\n    this.updateElement(new FormData(this.getSettingsForm()), false);\n  }\n\n  updateElement(data, saved = false) {\n    return this.fetchContentElementHtml(data).then(res => {\n      if (!res) return null;\n      this.updateContent(res, saved);\n      this.bindElement();\n    });\n  }\n\n  updateContent(html, saved = false) {\n    let div = document.createElement('div');\n    div.innerHTML = html;\n    let updatedElement = div.querySelector('*');\n    if (!updatedElement) return false;\n    if (this.element.classList.contains('active')) updatedElement.classList.add('active');\n    updatedElement.classList.add('editable');\n    if (this.isParent) this.getChildren().map(child => updatedElement.appendChild(child));\n    this.element.parentElement.insertBefore(updatedElement, this.element);\n    this.element.remove();\n    this.element = updatedElement;\n    if (!saved) this.setUnsaved();\n    return updatedElement;\n  }\n\n  getContentPopupUrl() {\n    if (this.type.name === 'content_element') return `/contao?do=article&table=tl_content&id=${this.id}&popup=1&act=edit&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`;\n    if (this.type.name === 'module') return `/contao?do=themes&table=tl_module&act=edit&id=${this.id}&popup=1&nb=1&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`;\n    return null;\n  }\n\n  bindSettingsPane() {\n    super.bindSettingsPane();\n    this.bindIframe(this.settingsPane);\n  }\n\n  bindIframe(iframe) {\n    let forms = [...iframe.contentDocument.querySelectorAll('form')];\n    forms.map(form => {\n      if (form._frontendeditBound) return null;\n      let fields = [...form.querySelectorAll('input,select,textarea,checkbox,radio')];\n      fields.map(f => f.addEventListener('change', () => {\n        this.updateElement(new FormData(this.getSettingsForm()));\n      }));\n      fields.map(f => f.addEventListener('keyup', () => {\n        this.updateElement(new FormData(this.getSettingsForm()));\n      }));\n      this.bindTinyMCE(iframe);\n      form._frontendeditBound = true;\n    });\n  }\n\n  bindTinyMCE(iframe) {\n    if (!iframe.contentWindow.tinymce) return null;\n    Object.keys(iframe.contentWindow.tinymce.editors).map(k => {\n      if (!k) return null;\n      let editor = iframe.contentWindow.tinymce.editors[k];\n      if (editor._frontendeditBound) return null;\n      editor._frontendeditBound = true;\n      let textarea = editor.targetElm;\n      let tinyIframe = editor.editorContainer.querySelector('iframe');\n      setTimeout(() => {\n        new MutationObserver(mutations => {\n          textarea.value = tinyIframe.contentDocument.body.innerHTML;\n          this.updateElement(new FormData(this.getSettingsForm()));\n        }).observe(tinyIframe.contentDocument.body, {\n          childList: true,\n          subtree: true,\n          characterData: true\n        });\n      }, 1000);\n    });\n  }\n\n  isEventTarget(e) {\n    if (!this.isParent) return true;\n    let children = this.getChildren();\n    let currentElement = e.target;\n\n    while (currentElement !== this.element) {\n      if (children.includes(currentElement)) return false;\n      currentElement = currentElement.parentElement;\n    }\n\n    return true;\n  }\n\n  buildFloatingSettings() {\n    let idocument = _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].pageIframe.contentDocument;\n    this.floatingSettings = idocument.createElement('div');\n    this.floatingSettings.classList.add('floating-settings');\n    this.floatingSettings.deleteButton = document.createElement('button');\n    this.floatingSettings.deleteButton.innerHTML = '✖';\n\n    this.floatingSettings.deleteButton.onclick = () => {\n      if (confirm(`Voulez-vous vraiment supprimer l'élément ID ${this.id} ?`)) this.deleteElement();\n    };\n\n    this.floatingSettings.moveUpButton = document.createElement('button');\n    this.floatingSettings.moveUpButton.innerHTML = '⯅';\n    this.floatingSettings.moveUpButton.addEventListener('click', () => {\n      this.moveElementUp();\n    });\n    this.floatingSettings.moveDownButton = document.createElement('button');\n    this.floatingSettings.moveDownButton.innerHTML = '⯆';\n    this.floatingSettings.moveDownButton.addEventListener('click', () => {\n      this.moveElementDown();\n    });\n    this.floatingSettings.insertAfterButton = document.createElement('button');\n    this.floatingSettings.insertAfterButton.innerHTML = '✚';\n    this.floatingSettings.insertAfterButton.addEventListener('click', () => {\n      this.insertAfter();\n    });\n    this.floatingSettings.appendChild(this.floatingSettings.moveUpButton);\n    this.floatingSettings.appendChild(this.floatingSettings.moveDownButton);\n    this.floatingSettings.appendChild(this.floatingSettings.deleteButton);\n    this.floatingSettings.appendChild(this.floatingSettings.insertAfterButton); //this.floatingSettings.insertButton = document.createElement('button')\n    //this.floatingSettings.insertButton.href = \"\"\n\n    idocument.body.appendChild(this.floatingSettings);\n  }\n\n  deleteElement() {\n    fetch(`/contao?do=article&table=${this.type.table}&id=${this.id}&act=delete&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`);\n    this.setUnactive();\n    this.element.remove();\n    this.settingsPane.remove();\n  }\n\n  moveElementUp() {\n    let previousElement = this.getPreviousEditableElement(2);\n    if (!previousElement) return false;\n    this.element.parentElement.insertBefore(this.element, this.getPreviousEditableElement().element);\n    this.refreshFloatingSettings();\n    return fetch(`/contao?do=article&table=tl_content&id=${this.id}&act=cut&mode=1&pid=${previousElement.id}&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`);\n  }\n\n  moveElementDown() {\n    let nextElement = this.getNextEditableElement();\n    if (!nextElement) return false;\n    this.element.parentElement.insertBefore(nextElement.element, this.element);\n    this.refreshFloatingSettings();\n    return fetch(`/contao?do=article&table=tl_content&id=${this.id}&act=cut&mode=1&pid=${nextElement.id}&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`);\n  }\n\n  insertAfter() {\n    let contentElement = document.createElement('div');\n    contentElement.className = 'editable';\n    let nextEditableElement = this.getNextEditableElement();\n    let nextElement = nextEditableElement ? nextEditableElement.element : null;\n    if (nextElement) this.element.parentElement.insertBefore(contentElement, nextElement);else this.element.parentElement.appendChild(contentElement);\n    return fetch(`/contao?do=article&table=tl_content&act=create&mode=1&pid=${this.id}&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`).then(res => {\n      let url = new URL(res.url);\n      let id = url.searchParams.get('id');\n      contentElement.classList.add(`${this.type.prefix}${id}`);\n      let newEditableElement = new EmbedEditableElement(contentElement);\n      _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editables.push(newEditableElement);\n      _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editables.map(e => e.setUnactive());\n      newEditableElement.setActive();\n      newEditableElement.setUnsaved();\n    });\n  }\n\n  getPreviousEditableElement(index = 1) {\n    let elements = _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAllElements();\n    let previousElement = elements[elements.indexOf(this.element) - index];\n    return previousElement ? previousElement.editable : null;\n  }\n\n  getNextEditableElement(index = 1) {\n    let elements = _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getAllElements();\n    let nextElement = elements[elements.indexOf(this.element) + index];\n    return nextElement ? nextElement.editable : null;\n  }\n\n  refreshFloatingSettings() {\n    let box = this.element.getBoundingClientRect();\n    let fbox = this.floatingSettings.getBoundingClientRect();\n    let left = box.left - fbox.width;\n    left = left > 0 ? left : 0;\n    this.floatingSettings.style.left = left + 'px';\n    this.floatingSettings.style.top = box.top + 'px';\n  }\n\n  setActive() {\n    super.setActive();\n    this.refreshFloatingSettings();\n    this.floatingSettings.classList.add('active');\n  }\n\n  setUnactive() {\n    super.setUnactive();\n    this.floatingSettings.classList.remove('active');\n  }\n\n  remove() {\n    this.settingsPane.remove();\n    this.element.remove();\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editables.splice(_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].editables.indexOf(this), 1);\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Resources/assets/js/embed-editable-element.js?");

/***/ }),

/***/ "./src/Resources/assets/js/frontend-edit.js":
/*!**************************************************!*\
  !*** ./src/Resources/assets/js/frontend-edit.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return FrontendEdit; });\n/* harmony import */ var _embed_editable_element__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./embed-editable-element */ \"./src/Resources/assets/js/embed-editable-element.js\");\n/* harmony import */ var cookies__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cookies */ \"./node_modules/cookies/src/cookies.js\");\n/* harmony import */ var _page_editable_element__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./page-editable-element */ \"./src/Resources/assets/js/page-editable-element.js\");\n/* harmony import */ var _layouts_json__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./layouts.json */ \"./src/Resources/assets/js/layouts.json\");\nvar _layouts_json__WEBPACK_IMPORTED_MODULE_3___namespace = /*#__PURE__*/__webpack_require__.t(/*! ./layouts.json */ \"./src/Resources/assets/js/layouts.json\", 1);\n\n\n\n\nclass FrontendEdit {\n  constructor() {\n    if (window.parent !== window) return null;\n    this.edit = cookies__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('frontendedit');\n    this.rt = null;\n    this.pageIframe = null;\n    this.contentPane = null;\n    this.editables = [];\n    this.getToken().then(res => {\n      if (!res) return null;\n      this.build();\n    });\n  }\n\n  build() {\n    this.removeAssets();\n    this.removeSymfonyDebugToolbar();\n    this.settingsBar = document.querySelector('.frontendedit-settings');\n    this.pageElement = new _page_editable_element__WEBPACK_IMPORTED_MODULE_2__[\"default\"](this.settingsBar.querySelector('.page-settings'));\n    this.buildLayoutSelect();\n    this.pageIframeContainer = document.querySelector('.frontendedit-page-iframe-container');\n    this.pageIframe = document.querySelector('.frontendedit-page-iframe');\n\n    this.pageIframe.onload = () => {\n      this.bindIframe();\n      this.pageIframe.classList.add('active');\n      /**\r\n       * Page element\r\n       */\n\n      this.pageElement.updateElement(JSON.parse(this.pageIframe.contentDocument.querySelector('meta[name=\"frontend-edit-page-info\"]').content));\n      this.pageElement.updateSettingsPane();\n      /**\r\n       * Editables\r\n       */\n\n      this.pageIframe.contentWindow.addEventListener('scroll', () => {\n        this.editables.filter(e => e.active).map(e => {\n          e.refreshFloatingSettings();\n        });\n      });\n      this.pageIframe.contentWindow.addEventListener('resize', () => {\n        this.editables.filter(e => e.active).map(e => {\n          e.refreshFloatingSettings();\n        });\n      });\n      this.editables.map(e => {\n        if (e.settingsPane) e.settingsPane.remove();\n      });\n      if (this.edit) this.buildArticleButton();\n    };\n\n    this.pageIframe.src = this.pageIframe.getAttribute('data-src');\n    this.contentPane = document.querySelector('.frontendedit-content-pane');\n    this.resizing = false;\n    this.colResize = document.querySelector('.frontendedit-col-resize > hr');\n    this.colResize.addEventListener('mousedown', () => {\n      this.resizing = true;\n      this.pageIframe.style.pointerEvents = 'none';\n      this.contentPane.style.pointerEvents = 'none';\n\n      let resize = e => {\n        FrontendEdit.resize(e.clientX / window.innerWidth);\n      };\n\n      document.addEventListener('mousemove', resize);\n      document.addEventListener('mouseup', () => {\n        document.removeEventListener('mousemove', resize);\n        this.pageIframe.style.pointerEvents = 'all';\n        this.contentPane.style.pointerEvents = 'all';\n      });\n    });\n    this.toggleMode = this.settingsBar.querySelector('.toggle-edit-mode');\n    if (this.edit) this.toggleMode.classList.add('active');\n    this.toggleMode.addEventListener('click', () => {\n      cookies__WEBPACK_IMPORTED_MODULE_1__[\"default\"].set('frontendedit', !this.edit);\n      window.location.reload();\n    });\n    this.saveButton = this.settingsBar.querySelector('.save');\n    this.saveButton.addEventListener('click', () => {\n      this.editables.filter(e => !e.saved).map(e => e.save());\n      FrontendEdit.updateButtons();\n    });\n    this.cancelButton = this.settingsBar.querySelector('.cancel');\n  }\n\n  buildLayoutSelect() {\n    this.layoutSelect = this.settingsBar.querySelector('.page-iframe-resize [name=\"layouts\"]');\n    this.layoutWidth = this.settingsBar.querySelector('[name=\"width\"]');\n    this.layoutHeight = this.settingsBar.querySelector('[name=\"height\"]');\n    _layouts_json__WEBPACK_IMPORTED_MODULE_3__.map(l => {\n      this.layoutSelect.add(new Option(l.name, l.name));\n    });\n    this.layoutSelect.addEventListener('change', () => {\n      let selectedLayout = _layouts_json__WEBPACK_IMPORTED_MODULE_3__.filter(l => l.name === this.layoutSelect.selectedOptions[0].value);\n      if (selectedLayout.length) selectedLayout = selectedLayout[0];else return null;\n      this.layoutWidth.value = selectedLayout.width;\n      this.layoutHeight.value = selectedLayout.height;\n      FrontendEdit.resizePageIframe(selectedLayout.width, selectedLayout.height);\n    });\n  }\n  /**\r\n   * Column resize between pageIframe and content edition pane\r\n   */\n\n\n  static resize(pageIframeRatio = null) {\n    if (!pageIframeRatio) pageIframeRatio = cookies__WEBPACK_IMPORTED_MODULE_1__[\"default\"].get('resizedPageIframeRatio');else cookies__WEBPACK_IMPORTED_MODULE_1__[\"default\"].set('resizedPageIframeRatio', pageIframeRatio);\n    if (!pageIframeRatio) return null;\n    this.pageIframeContainer.style.width = pageIframeRatio * 100 + '%';\n    this.contentPane.style.width = (1 - pageIframeRatio) * 100 + '%';\n    this.contentPane.classList.add('resized');\n  }\n  /**\r\n   * Resize pageIframe to specific width/height\r\n   */\n\n\n  static resizePageIframe(width, height) {\n    this.pageIframe.style.width = width + 'px';\n    this.pageIframe.style.height = height + 'px';\n    let scale = this.pageIframeContainer.getBoundingClientRect().width / width;\n    this.pageIframe.style.transform = `scale(${scale})`;\n  }\n\n  buildArticleButton() {\n    let articles = [...this.pageIframe.contentDocument.querySelectorAll('.mod_article')];\n    articles.filter(article => article.id.match(/article-/)).map(article => {\n      let articleId = article.id.replace(/article-/, '');\n      let button = document.createElement('button');\n      button.className = \"frontendedit-insert-button\";\n      button.innerHTML = \"✚ Insérer un élément\";\n      if (article.children[0]) article.insertBefore(button, article.children[0]);else article.appendChild(button);\n      button.addEventListener('click', () => {\n        let contentElement = document.createElement('div');\n        contentElement.className = 'editable';\n        if (article.children[1]) article.insertBefore(contentElement, article.children[1]);else article.appendChild(contentElement);\n        return fetch(`/contao?do=article&table=tl_content&act=create&mode=2&pid=${articleId}&rt=${FrontendEdit.rt}`).then(res => {\n          let url = new URL(res.url);\n          let id = url.searchParams.get('id');\n          contentElement.classList.add(`ce_${id}`);\n          let newEditableElement = new _embed_editable_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"](contentElement);\n          FrontendEdit.editables.push(newEditableElement);\n          FrontendEdit.editables.map(e => e.setUnactive());\n          newEditableElement.setActive();\n          newEditableElement.setUnsaved();\n        });\n      });\n    });\n  }\n\n  removeSymfonyDebugToolbar() {\n    let sfToolbar = document.querySelector('.sf-toolbar');\n    if (sfToolbar) sfToolbar.remove();\n  }\n\n  removeAssets() {\n    let assets = [...document.querySelectorAll('link[href],style,script')];\n    assets.map(s => {\n      if (s.href && !s.href.match(/frontendedit/)) s.remove();\n      if (s.src && !s.src.match(/frontendedit/)) s.remove();\n    });\n  }\n\n  getToken() {\n    return fetch(\"/api/frontendedit/token\").then(res => res.json()).then(token => {\n      if (!token) return false;\n      this.rt = token;\n      return true;\n    });\n  }\n\n  getIframeEditableElements() {\n    return [...this.pageIframe.contentDocument.body.querySelectorAll('.editable')];\n  }\n\n  bindIframe() {\n    let links = [...this.pageIframe.contentDocument.querySelectorAll('a[href]')];\n    links.map(l => {\n      l.addEventListener('click', e => {\n        if (!l.href.length) return null;\n        e.preventDefault();\n        FrontendEdit.setIframeUrl(l.href);\n      });\n    });\n    if (this.edit) this.getIframeEditableElements().map(el => {\n      let editable = new _embed_editable_element__WEBPACK_IMPORTED_MODULE_0__[\"default\"](el);\n      this.editables.push(editable);\n    });\n  }\n\n  static updateButtons() {\n    let unsaved = FrontendEdit.editables.filter(e => !e.saved).length;\n    let saveButton = FrontendEdit.settingsBar.querySelector('.save');\n    let cancelButton = FrontendEdit.settingsBar.querySelector('.cancel');\n\n    if (unsaved) {\n      saveButton.classList.add('active');\n      saveButton.querySelector('.count').innerHTML = `(${unsaved})`;\n      cancelButton.classList.add('active');\n    } else {\n      saveButton.classList.remove('active');\n      saveButton.querySelector('.count').innerHTML = \"\";\n      cancelButton.classList.remove('active');\n    }\n  }\n\n  static closeAllSettingsPane() {\n    [...FrontendEdit.contentPane.children].map(el => el.style.display = 'none');\n  }\n\n  static clearSettingsPage() {\n    FrontendEdit.contentPane.innerHTML = '';\n  }\n\n  static getAllElements() {\n    return [...this.pageIframe.contentDocument.querySelectorAll('.editable')];\n  }\n\n  static setIframeUrl(url) {\n    FrontendEdit.pageIframe.src = url + '?frontendedit';\n    window.history.pushState('', '', url);\n  }\n\n  static get rt() {\n    return window._rt;\n  }\n\n  static set rt(value) {\n    window._rt = value;\n  }\n\n  get rt() {\n    return window._rt;\n  }\n\n  set rt(value) {\n    window._rt = value;\n  }\n\n  static get pageIframe() {\n    return window._pageIframe;\n  }\n\n  static set pageIframe(value) {\n    window._pageIframe = value;\n  }\n\n  get pageIframe() {\n    return window._pageIframe;\n  }\n\n  set pageIframe(value) {\n    window._pageIframe = value;\n  }\n\n  static get contentPane() {\n    return window._contentPane;\n  }\n\n  static set contentPane(value) {\n    window._contentPane = value;\n  }\n\n  static get pageIframeContainer() {\n    return window._pageIframeContainer;\n  }\n\n  static set pageIframeContainer(value) {\n    window._pageIframeContainer = value;\n  }\n\n  get pageIframeContainer() {\n    return window._pageIframeContainer;\n  }\n\n  set pageIframeContainer(value) {\n    window._pageIframeContainer = value;\n  }\n\n  get contentPane() {\n    return window._contentPane;\n  }\n\n  set contentPane(value) {\n    window._contentPane = value;\n  }\n\n  static get settingsBar() {\n    return window._settingsBar;\n  }\n\n  static set settingsBar(value) {\n    window._settingsBar = value;\n  }\n\n  get settingsBar() {\n    return window._settingsBar;\n  }\n\n  set settingsBar(value) {\n    window._settingsBar = value;\n  }\n\n  static get editables() {\n    return window._editables;\n  }\n\n  static set editables(value) {\n    window._editables = value;\n  }\n\n  get editables() {\n    return window._editables;\n  }\n\n  set editables(value) {\n    window._editables = value;\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Resources/assets/js/frontend-edit.js?");

/***/ }),

/***/ "./src/Resources/assets/js/layouts.json":
/*!**********************************************!*\
  !*** ./src/Resources/assets/js/layouts.json ***!
  \**********************************************/
/*! exports provided: 0, 1, 2, 3, 4, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"[{\\\"name\\\":\\\"Desktop (24\\\\\\\")\\\",\\\"width\\\":1920,\\\"height\\\":1080},{\\\"name\\\":\\\"Desktop (19\\\\\\\")\\\",\\\"width\\\":1440,\\\"height\\\":900},{\\\"name\\\":\\\"Laptop (Notebook)\\\",\\\"width\\\":1536,\\\"height\\\":864},{\\\"name\\\":\\\"Laptop (15\\\\\\\")\\\",\\\"width\\\":1366,\\\"height\\\":768},{\\\"name\\\":\\\"Mobile (Tiny)\\\",\\\"width\\\":360,\\\"height\\\":640}]\");\n\n//# sourceURL=webpack:///./src/Resources/assets/js/layouts.json?");

/***/ }),

/***/ "./src/Resources/assets/js/page-editable-element.js":
/*!**********************************************************!*\
  !*** ./src/Resources/assets/js/page-editable-element.js ***!
  \**********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return PageEditableElement; });\n/* harmony import */ var _frontend_edit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./frontend-edit */ \"./src/Resources/assets/js/frontend-edit.js\");\n/* harmony import */ var _editable_element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./editable-element */ \"./src/Resources/assets/js/editable-element.js\");\n\n\nclass PageEditableElement extends _editable_element__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(element) {\n    super(element);\n    this.alias = null;\n    this.title = element.querySelector('.page-title').innerHTML;\n  }\n\n  getContentPopupUrl() {\n    return `/contao?do=page&popup=1&act=edit&id=${this.id}&rt=${_frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].rt}`;\n  }\n\n  onSettingsPaneSubmit() {\n    let data = new FormData(this.getSettingsForm());\n    this.alias = data.get('alias');\n    this.title = data.get('title');\n    _frontend_edit__WEBPACK_IMPORTED_MODULE_0__[\"default\"].setIframeUrl(this.alias);\n    this.updateElement();\n    this.preventSettingsPaneUpdate = true;\n  }\n\n  updateSettingsPane() {\n    if (this.preventSettingsPaneUpdate) return this.preventSettingsPaneUpdate = false;\n    super.updateSettingsPane();\n  }\n\n  updateElement(opts = {}) {\n    for (let key in opts) this[key] = opts[key];\n\n    this.element.querySelector('.page-title').innerHTML = this.title;\n    document.title = this.title;\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Resources/assets/js/page-editable-element.js?");

/***/ }),

/***/ "./src/Resources/assets/js/rifle-request.js":
/*!**************************************************!*\
  !*** ./src/Resources/assets/js/rifle-request.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return RifleRequest; });\n/**\r\n * Utility to handle lots of concurrent fetches (eg: EmbedEditableElement.fetchContentElement)\r\n */\nclass RifleRequest {\n  constructor() {\n    this.requests = [];\n    this.bufferSize = 5;\n    this.currentBuffer = 0;\n    this.timeout = 500;\n    this.lastT = Date.now();\n  }\n\n  fetch(url, params = {}) {\n    return new Promise((resolve, reject) => {\n      let request = this.addRequest(url, params);\n\n      if (Date.now() - this.lastT < this.timeout) {\n        this.currentBuffer++;\n\n        if (this.currentBuffer >= this.bufferSize) {\n          this.currentBuffer = 0;\n        } else {\n          return setTimeout(() => {\n            if (this.getLastRequest() === request) return this.fetch(request.url, request.params);else return reject();\n          }, this.timeout);\n        }\n      }\n\n      params = Object.assign({\n        signal: request.controller.signal\n      }, params);\n      this.lastT = Date.now();\n      this.abortPreviousRequest(request);\n      return fetch(url, params).then(res => {\n        return resolve(res);\n      });\n    });\n  }\n\n  addRequest(url, params) {\n    let request = {\n      url,\n      params,\n      time: Date.now(),\n      controller: new AbortController()\n    };\n    this.requests.push(request);\n    return request;\n  }\n\n  abortPreviousRequest(refRequest) {\n    this.requests.filter(request => request.time < refRequest.time).map(request => {\n      request.controller.abort();\n    });\n    this.requests = this.requests.filter(request => request.time > refRequest.time || request === refRequest);\n  }\n\n  getLastRequest() {\n    return this.requests[this.requests.length - 1];\n  }\n\n  clearRequests() {\n    this.requests.map(r => r.controller.abort());\n    this.requests = [];\n  }\n\n}\n\n//# sourceURL=webpack:///./src/Resources/assets/js/rifle-request.js?");

/***/ }),

/***/ "./src/Resources/assets/js/types.json":
/*!********************************************!*\
  !*** ./src/Resources/assets/js/types.json ***!
  \********************************************/
/*! exports provided: 0, 1, 2, default */
/***/ (function(module) {

eval("module.exports = JSON.parse(\"[{\\\"name\\\":\\\"content_element\\\",\\\"prefix\\\":\\\"ce_\\\",\\\"table\\\":\\\"tl_content\\\"},{\\\"name\\\":\\\"module\\\",\\\"prefix\\\":\\\"mod_\\\",\\\"table\\\":\\\"tl_module\\\"},{\\\"name\\\":\\\"page\\\",\\\"prefix\\\":\\\"page_\\\",\\\"table\\\":\\\"tl_page\\\"}]\");\n\n//# sourceURL=webpack:///./src/Resources/assets/js/types.json?");

/***/ }),

/***/ "./src/Resources/assets/scss/style.scss":
/*!**********************************************!*\
  !*** ./src/Resources/assets/scss/style.scss ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin\n\n//# sourceURL=webpack:///./src/Resources/assets/scss/style.scss?");

/***/ })

/******/ });